**Описание системы**

Система электронной очереди. Представляет собой функционал обработки выданных талонов в расчётных центрах (центры по внесению показаний счётчиков, платежей, почта, аптека и т.д.). Бизнес сценарий: Клиент приходит в отделение аптеки, подходит к терминалу, выбирает услугу и нажимает получить талон. Система регистрирует талон клиента, помещает талон в очередь, затем вызывает талон к окну с продавцом. После обслуживания талон у даляется из очереди. Также доступно бронирование времени, по которому можно получить более приоритетный талон в очереди.

**Микросервисы**

1. UsersService - сервис управления пользователями и их ролями. В зависимости от роли пользователя ему доступен тот или иной функционал в системе (Отображение разных frontend'ов, а именно приложение терминала, админки, телевизора, оператора, который обслуживает клиентов).
2. TalonManagementService - сервис управления талонами. Отвечает за создание, получение, изменение и удаление (CRUD) талонов.
3. AdministrationService - сервис администрирования. Управляет конфигурацией системы, а именно общие настройки (количество окон для обслуживания в отделении, список услуг для офиса, литера для услуг и т.д.)
4. BookingService - сервис бронирования времени для обслуживания. Предоставляет возможность посмотреть календарь доступных временных слотов для бронирования времени для обслуживания. Создать и удалить бронь.
5. NotificationService - сервис нотификаций изменения очереди. Уведомляет фронт об изменениях, которые происходят в электронной очереди в офисе.

**Описание бизнес процесса создания талона**

1. Приложение "Терминал" логинится под пользователем с ролью "Terminal".
2. Клиент подходит к терминалу, выбирает услугу и нажимает "получить талон". Приложение "Терминал" отправляет запрос с использованием REST API на сервис управления талонами (TalonManagementService). TalonManagementService получает настройки системы, а именно литеру услуги, чтобы напечатать талон. Для этого он пытается получить настройки из кэша (можно использовать локальный кэш и Redis), чтобы лишний раз не ходить в AdministrationService. Если настройки нет, то идёт по REST API в AdministrationService и получает настройку. Если клиент ввёл информацию по бронированию, то по REST API нужно проверить бронь. Здесь синхронное взаимодействие с BookingService. Далее создание талона в БД.
3. После создания талона TalonManagementService посылает сообщение в Rabbit, что талон создан и возвращает номер нового талона в приложение "Терминал" для отображения клиенту.
4. NotificationService получает сообщение о новом талоне и выполняет нотификацию приложения "Телевизор" для актуализации отображения очереди талонов в отделении.

**Выделение сервиса AdministrationService из монолита**

1. Выделение доменной области, отвечающей за настройки системы. Выделение кодовой базы в отдельные папки в монолите.
2. Создание новой бд под сервис. Запись новых настроек в новую бд. Выпуск первого релиза.
3. Создание нового микросервиса AdministrationService. Тестирование с новой базой данных. Деплой на прод нового сервиса.
4. Переключение части трафика на новый сервис.
5. Переключение всего трафика на новый сервис. Стабилизация работы.
6. Удаление старого кода из монолита.
